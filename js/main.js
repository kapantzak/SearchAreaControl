var data = [
  {
    "code": null,    
    "name": "Economy car",
    "attributes": {
      "data-id": "1"
    },
    "children": [
      {
        "code": null,        
        "name": "Microcar",
        "attributes": {
          "data-id": "11"
        },
        "children": null
      },
      {
        "code": null,        
        "name": "Hatchbacks",
        "attributes": {
          "data-id": "12"
        },
        "children": [
          {
            "code": null,            
            "name": "Ultracompact car",
            "attributes": {
              "data-id": "121"
            },
            "children": null
          },
          {
            "code": null,            
            "name": "City car",
            "attributes": {
              "data-id": "122"
            },
            "children": null
          },
          {
            "code": null,            
            "name": "Supermini/subcompact car",
            "attributes": {
              "data-id": "123"
            },
            "children": null
          }
        ]
      }      
    ]
  },
  {
    "code": null,    
    "name": "Family car",
    "attributes": {
      "data-id": "2"
    },
    "children": [
      {
        "code": null,        
        "name": "Small family car/compact car",
        "attributes": {
          "data-id": "21"
        },
        "children": null
      },
      {
        "code": null,        
        "name": "	Large family / mid-size",
        "attributes": {
          "data-id": "22"
        },
        "children": null
      }
    ]
  },
  {
    "code": null,    
    "name": "Saloons / sedans",
    "attributes": {
      "data-id": "3"
    },
    "children": [
      {
        "code": null,        
        "name": "Large family / mid-size",
        "attributes": {
          "data-id": "31"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Full size / large",
        "attributes": {
          "data-id": "32"
        },
        "children": null
      },
{
        "code": null,
        "name": "Crossover SUV",
        "attributes": {
          "data-id": "33"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Minivans / MPVs",
        "attributes": {
          "data-id": "34"
        },
        "children": null
      }
    ]
  },
  {
    "code": null,
    "name": "Luxury vehicle",
    "attributes": {
      "data-id": "4"
    },
    "children": [
      {
        "code": null,
        "name": "Compact executive",
        "attributes": {
          "data-id": "41"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Executive / mid-luxury",
        "attributes": {
          "data-id": "42"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Full-size luxury / Grand saloon",
        "attributes": {
          "data-id": "43"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Estate cars / station wagons",
        "attributes": {
          "data-id": "44"
        },
        "children": null
      }
    ]
  },
  {
    "code": null,
    "name": "Sports cars",
    "attributes": {
      "data-id": "5"
    },
    "children": [
      {
        "code": null,
        "name": "Hot hatch",
        "attributes": {
          "data-id": "51"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Sports saloon / sports sedan",
        "attributes": {
          "data-id": "52"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Sports car",
        "attributes": {
          "data-id": "53"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Grand tourer",
        "attributes": {
          "data-id": "54"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Supercar",
        "attributes": {
          "data-id": "55"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Muscle car",
        "attributes": {
          "data-id": "56"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Pony car",
        "attributes": {
          "data-id": "57"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Convertible",
        "attributes": {
          "data-id": "58"
        },
        "children": null
      }
    ]
  },
  {
    "code": null,
    "name": "Off-roaders",
    "attributes": {
      "data-id": "6"
    },
    "children": [
      {
        "code": null,
        "name": "Sport utility vehicle",
        "attributes": {
          "data-id": "61"
        },
        "children": null
      }
    ]
  },
  {
    "code": null,
    "name": "Commercial vehicle",
    "attributes": {
      "data-id": "7"
    },
    "children": [
      {
        "code": null,
        "name": "Van",
        "attributes": {
          "data-id": "71"
        },
        "children": null
      }
    ]
  }
];

var data2 = [
  {
    "code": null,
    "name": "Test category 1",
    "attributes": {
      "data-id": "1"
    },
    "children": [
      {
        "code": null,
        "name": "Test 11",
        "attributes": {
          "data-id": "11"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Test 12",
        "attributes": {
          "data-id": "12"
        },
        "children": [
          {
            "code": null,
            "name": "Test121",
            "attributes": {
              "data-id": "121"
            },
            "children": null
          },
          {
            "code": null,
            "name": "Test 122",
            "attributes": {
              "data-id": "122"
            },
            "children": null
          },
          {
            "code": null,
            "name": "Test 123",
            "attributes": {
              "data-id": "123"
            },
            "children": null
          }
        ]
      }      
    ]
  },
  {
    "code": null,
    "name": "Test category 2",
    "attributes": {
      "data-id": "2"
    },
    "children": [
      {
        "code": null,
        "name": "Test 21",
        "attributes": {
          "data-id": "21"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Test 22",
        "attributes": {
          "data-id": "22"
        },
        "children": null
      }
    ]
  },
  {
    "code": null,
    "name": "Test category 3",
    "attributes": {
      "data-id": "3"
    },
    "children": [
      {
        "code": null,
        "name": "Test 31",
        "attributes": {
          "data-id": "31"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Test 32",
        "attributes": {
          "data-id": "32"
        },
        "children": null
      },
{
        "code": null,
        "name": "Test 33",
        "attributes": {
          "data-id": "33"
        },
        "children": null
      },
      {
        "code": null,
        "name": "Test 34",
        "attributes": {
          "data-id": "34"
        },
        "children": null
      }
    ]
  }  
];

$(document).ready(function() {
  
    $('#myButton').searchAreaControl({        
        data: data,
        mainButton: {
            defaultText: 'Cars'
        }
    });
      
    var btn2 = $('#myButton2');
    btn2.searchAreaControl({        
        data: data,
        mainButton: {
            defaultText: 'Cars'
        }
    });
    btn2.searchAreaControl('setSelectedNodes', false, [55]);
        
    $('#myButton3').searchAreaControl({        
        data: data,
        mainButton: {
            defaultText: 'Cars'
        }
    });

    $('#myButton4').searchAreaControl({        
        data: data,
        mainButton: {
            defaultText: 'Cars'
        }
    });

    $('#myButton5').searchAreaControl({        
        data: data,
        mainButton: {
            defaultText: 'Cars'
        }
    });


    // TEST ====================================================== //

    $('#btn1').searchAreaControl({        
        data: data,
        mainButton: {
            defaultText: 'Cars'
        }
    });

    $('#btn2').searchAreaControl({        
        data: data2,
        mainButton: {
            defaultText: 'Data 2'
        }
    });
});

$(document).on('click', '#selectPony', function() {      
    $('#myButton3').searchAreaControl('setSelectedNodes',false,[57]);
});

$(document).on('click', '#getSelectedByAttribute', function() {
    var selected = $('#myButton4').searchAreaControl('getSelectedByAttribute','data-id');
    var result = (selected.length > 0) ? '[' + selected.join(',') + ']' : '[]';
    $('#getSelectedByAttribute_result').html(result);
});

$(document).on('click', '#setDisabled', function() {      
    $('#myButton5').searchAreaControl('setDisabled',true);
});

$(document).on('click', '#setEnabled', function() {      
    $('#myButton5').searchAreaControl('setDisabled',false);
});


// TEST ================================================================================ //

$(document).on('click', '#updateDatasource_btn1', function() {
  $('#btn1').searchAreaControl('updateDatasource', data2);
});

$(document).on('click', '#getPopup', function() {
  var popup1 = $('#btn1').searchAreaControl('getPopup');
  console.log(popup1);
  //popup1.find('.sac-header-holder').css('border', '1px solid red');
});

$(document).on('click', '#setDisbaledNodes', function() {
  $('#btn1').searchAreaControl('setDisabledNodes', [21,22], true);
});

$(document).on('click', '#enableAll', function() {
  $('#btn1').searchAreaControl('enableAllNodes');
});

$(document).on('click', '#destroy_btn1', function() {
  $('#btn1').searchAreaControl('destroy');
});

$(document).on('click', '#getSelectedByAttribute_btn1', function() {
    var selected = $('#btn1').searchAreaControl('getSelectedByAttribute','data-id');
    var result = (selected.length > 0) ? '[' + selected.join(',') + ']' : '[]';
    alert(result);
});

$(document).on('click', '#destroy_btn2', function() {
  $('#btn2').searchAreaControl('destroy');
});

$(document).on('click', '#setSelectedNodes2', function() {
  $('#btn2').searchAreaControl('setSelectedNodes', false, [31,32], 'data-id');
});

$(document).on('click', '#getSelectedByAttribute_btn2', function() {
    var selected = $('#btn2').searchAreaControl('getSelectedByAttribute','data-id');
    var result = (selected.length > 0) ? '[' + selected.join(',') + ']' : '[]';
    alert(result);
});

$(document).on('searchareacontrol.beforeinit', function(e,data) {
  console.log(data);
});

$(document).on('searchareacontrol.afterinit', function(e,data) {
  console.log(data);
});

$(document).on('searchareacontrol.popup.shown', function(e,data) {
  console.log(data);
});

$(document).on('searchareacontrol.popup.hidden', function(e,data) {
  console.log(data);
});

$(document).on('searchareacontrol.button.click', function(e,data) {
  console.log(data);
});